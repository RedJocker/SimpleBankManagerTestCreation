<h2>Description</h2>

<p>In this stage, we will implement a feature to calculate the exchange rate. When a user successfully logins, they should be able to go to the <em>Calculate Exchange</em> screen, where they can select the currencies, enter an amount to convert, and start the conversion by clicking a button. The converted amount will be displayed in a text view.</p>

<h2>Objectives</h2>

<ol>
    <li>Add a Fragment named <code>CalculateExchangeFragment</code> to the navigation graph:

        <ul>
            <li>Add a <code>TextView</code> to <code>CalculateExchangeFragment</code> with the ID of <code>calculateExchangeLabelFromTextView</code>, the text should be <code>convert from</code>;</li>
            <li>Add a <code>TextView</code> to <code>CalculateExchangeFragment</code> with the ID of <code>calculateExchangeLabelToTextView</code>, the text should be <code>convert to</code>;</li>
            <li>Add a <code>Spinner</code> to <code>CalculateExchangeFragment</code> with the ID of <code>calculateExchangeFromSpinner</code>, the spinner should contain this text in the dropdown: <code>EUR</code>, <code>GBP</code>, <code>USD</code>;</li>
            <li>Add a <code>Spinner</code> to <code>CalculateExchangeFragment</code> with the ID of <code>calculateExchangeToSpinner</code>, the spinner should contain this text in the dropdown: <code>EUR</code>, <code>GBP</code>, <code>USD</code>;</li>
            <li>Add a <code>TextView</code> to <code>CalculateExchangeFragment</code> with the ID of <code>calculateExchangeDisplayTextView</code>, this <code>textView</code> will be used to show the calculated amount to two decimal points;</li>
            <li>Add an <code>EditText</code> to <code>CalculateExchangeFragment</code> with the ID of <code>calculateExchangeAmountEditText</code>. It should accept the <code>numberDecimal</code>input type and have the following hint: <code>Enter amount</code>;</li>
            <li>Add a <code>Button</code> to <code>CalculateExchangeFragment</code> with the ID of <code>calculateExchangeButton</code> and with the text <code>calculate</code>;</li>
        </ul>
    </li>
    <li>On the design tab of <code>nav_graph</code>, make a connection from <code>UserMenuFragment</code> to <code>CalculateExchangeFragment</code>. The generated code after making the connection should contain the action with the ID <code>action_userMenuFragment_to_calculateExchangeFragment</code> and the destination <code>calculateExchangeFragment</code>;</li>
    <li>After clicking on <code>userMenuExchangeCalculatorButton</code>, display <code>CalculateExchangeFragment</code>. Users should be able to choose the currency using <code>calculateExchangeFromSpinner</code> and <code>calculateExchangeToSpinner</code>. Input the amount to convert at <code>calculateExchangeAmountEditText</code>, and confirm conversion with the button <code>calculateExchangeButton</code>;</li>
    <li>Tests may pass the <code>exchangeMap</code> as <code>Serializable</code> to <code>MainActivity</code> through <code>intent.extras</code>. Retrieve that <code>exchangeMap</code>, using the key <code>"exchangeMap"</code>. Cast it back to a map to be able to use it as a map. The type signature of <code>exchangeMap</code> is <code>Map&lt;String, Map&lt;String, Double&gt;&gt;</code>. In case no <code>exchangeMap</code> is passed, use the following as the default value:
        <pre><code>
val defaultMap = mapOf(
    "EUR" to mapOf(
        "GBP" to 0.5,
        "USD" to 2.0
    ),
    "GBP" to mapOf(
        "EUR" to 2.0,
        "USD" to 4.0
    ),
    "USD" to mapOf(
        "EUR" to 0.5,
        "GBP" to 0.25
    )
)
        </code></pre>
        The outer key of exchangeMap is the source currency from which we are converting and the inner key is the target currency to convert to;</li>
    <li>If users select the same currency on both <code>calculateExchangeFromSpinner</code> and <code>calculateExchangeToSpinner</code>, show the toast message <code>Cannot convert to same currency</code> and replace currency at <code>calculateExchangeToSpinner</code> with the next available currency;</li>
    <li>If no value is passed to <code>calculateExchangeAmountEditText</code> and the button <code>calculateExchangeButton</code> is clicked, show the toast message <code>Enter amount</code>;</li>
    <li>If users click on the <code>back</code> button at <code>CalculateExchangeFragment</code>, redirect users to <code>UserMenuFragment</code>;</li>
    <li>Amount should be formatted with 2 decimal places and a currency symbol of selected currency before amount, for USD -> $, EUR -> € and for GBP -> £.
         Example: $10.50 = €5.25;</li>

</ol>

<h2>Example<br>
    <img alt="Implemented features" height="600" name="simpleBankManager_stage4a.gif" src="https://ucarecdn.com/87ac4b02-60b6-4c76-ae10-5933c5a5a214/" width="340"><br>
    <br>
    <br>
    <img alt="Selecting same currency" height="600" name="simpleBankManager_stage4b.gif" src="https://ucarecdn.com/12e96184-79fd-4633-b120-f883e1d2f1ca/" width="340"><br>
    <br>
    <br>
    <img alt="Calculating exchange" height="600" name="simpleBankManager_stage4c.gif" src="https://ucarecdn.com/ab6aca69-1566-42e4-94de-7a7b799c2cb5/" width="340"></h2>